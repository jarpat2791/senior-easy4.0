<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
  <title>Senior-Easy App</title>
  <link rel="manifest" href="manifest.json"/>
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{width:100%;height:100%;overflow-x:hidden;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif}
    /* pÅ‚ynne pisanie */
    input,textarea,select{-webkit-user-select:text!important;-moz-user-select:text!important;-ms-user-select:text!important;user-select:text!important;font-size:1.25rem!important;padding:.75rem 1rem;border:2px solid #d1d5db;border-radius:1rem;width:100%;background:white;touch-action:manipulation}
    input:focus,textarea:focus,select:focus{outline:none;border-color:#3B82F6;box-shadow:0 0 0 3px rgba(59,130,246,.25)}
    button{cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,.1)}
    .improved-input{-webkit-user-select:text!important;-moz-user-select:text!important;-ms-user-select:text!important;user-select:text!important;font-size:1.25rem!important;padding:.75rem 1rem;border:2px solid #d1d5db;border-radius:1rem;width:100%;background:white;touch-action:manipulation}
    body{background:linear-gradient(to bottom right,#dbeafe,#e0e7ff)}
  </style>
</head>
<body class="bg-gradient-to-br from-blue-100 to-purple-100">
<div id="root" class="p-2 sm:p-4 max-w-4xl mx-auto pb-20 min-h-screen"></div>

<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script type="text/babel">
  const {useState,useEffect,useRef}=React;

  /* ============= SMART INPUT â€“ NIE PRZERYSOWUJE ============= */
  function SmartInput({value,onChange,...rest}){
    const [local,setLocal]=useState(value);
    useEffect(()=>setLocal(value),[value]);
    return <input {...rest} value={local} onChange={e=>setLocal(e.target.value)} onBlur={()=>onChange(local)} className="improved-input"/>
  }
  /* =========================================================== */

  function SeniorEasyApp(){
    const [currentScreen,setCurrentScreen]=useState('home');
    const [medications,setMedications]=useState([]);
    const [familyContacts,setFamilyContacts]=useState([]);
    const [localServices,setLocalServices]=useState([]);
    const [notifications,setNotifications]=useState([]);
    const [careMode,setCareMode]=useState(true);
    const [showInstallPrompt,setShowInstallPrompt]=useState(false);
    const [deferredPrompt,setDeferredPrompt]=useState(null);
    const [showNotifyDialog,setShowNotifyDialog]=useState(false);
    const [selectedMedication,setSelectedMedication]=useState(null);
    const [medicationHistory,setMedicationHistory]=useState([]);
    const [newMedName,setNewMedName]=useState('');
    const [newMedTime,setNewMedTime]=useState('');
    const [newMedDays,setNewMedDays]=useState(['Pn','Wt','Åšr','Cz','Pt','Sb','Nd']);
    const [newMedNote,setNewMedNote]=useState('');
    const [newContactName,setNewContactName]=useState('');
    const [newContactPhone,setNewContactPhone]=useState('');
    const [newContactApp,setNewContactApp]=useState('');
    const [newServiceName,setNewServiceName]=useState('');
    const [newServicePhone,setNewServicePhone]=useState('');
    const [newServiceIcon,setNewServiceIcon]=useState('');
    const [editingContact,setEditingContact]=useState(null);
    const [editingService,setEditingService]=useState(null);
    const [isLoggedIn,setIsLoggedIn]=useState(false);
    const [username,setUsername]=useState('');
    const [password,setPassword]=useState('');
    const [currentPassword,setCurrentPassword]=useState('');
    const [newPassword,setNewPassword]=useState('');
    const [confirmPassword,setConfirmPassword]=useState('');
    const [emergencyMode,setEmergencyMode]=useState(false);
    const [emergencyCountdown,setEmergencyCountdown]=useState(null);
    const [healthData,setHealthData]=useState({});
    const [reminders,setReminders]=useState([]);
    const [newReminderText,setNewReminderText]=useState('');
    const [newReminderTime,setNewReminderTime]=useState('');
    const [weatherData,setWeatherData]=useState(null);
    const [weatherLoading,setWeatherLoading]=useState(false);
    const [location,setLocation]=useState('');
    const [dailyTips,setDailyTips]=useState([]);
    const [currentTipIndex,setCurrentTipIndex]=useState(0);
    const [sosContacts,setSosContacts]=useState([]);

    useEffect(()=>{
      const saved=localStorage.getItem('medications');
      setMedications(saved?JSON.parse(saved):[
        {id:1,name:'Acard',time:'08:00',taken:false,days:['Pn','Wt','Åšr','Cz','Pt','Sb','Nd'],note:'przed jedzeniem'},
        {id:2,name:'Metformin',time:'12:00',taken:false,days:['Pn','Wt','Åšr','Cz','Pt'],note:'po posiÅ‚ku'},
        {id:3,name:'Amlozek',time:'20:00',taken:false,days:['Pn','Wt','Åšr','Cz','Pt','Sb','Nd'],note:''}
      ]);
      const savedC=localStorage.getItem('familyContacts');
      setFamilyContacts(savedC?JSON.parse(savedC):[
        {id:1,name:'Anna (cÃ³rka)',phone:'+48123456789',avatar:'ğŸ‘©',app:'whatsapp',emergencyContact:true},
        {id:2,name:'Piotr (syn)',phone:'+48987654321',avatar:'ğŸ‘¨',app:'viber',emergencyContact:true},
        {id:3,name:'Dr. Kowalski',phone:'+48555123456',avatar:'ğŸ‘¨â€âš•ï¸',app:'',emergencyContact:false}
      ]);
      const savedS=localStorage.getItem('localServices');
      setLocalServices(savedS?JSON.parse(savedS):[
        {id:1,name:'Transport Medyczny',phone:'800123456',icon:'ğŸš‘'},
        {id:2,name:'Pomoc Domowa',phone:'800654321',icon:'ğŸ '},
        {id:3,name:'Apteka z Dowozem',phone:'800789012',icon:'ğŸ’Š'},
        {id:4,name:'Pogotowie',phone:'999',icon:'ğŸš¨'},
        {id:5,name:'Numer Alarmowy',phone:'112',icon:'ğŸ†˜'}
      ]);
      const savedH=localStorage.getItem('healthData');
      setHealthData(savedH?JSON.parse(savedH):{bloodPressure:'',heartRate:'',bloodSugar:'',weight:'',lastUpdate:''});
      const savedR=localStorage.getItem('reminders');
      setReminders(savedR?JSON.parse(savedR):[]);
      const savedL=localStorage.getItem('isLoggedIn');
      setIsLoggedIn(savedL==='true');
      const savedU=localStorage.getItem('username');
      setUsername(savedU||'');
      const savedSo=localStorage.getItem('sosContacts');
      setSosContacts(savedSo?JSON.parse(savedSo):[
        {id:1,name:'Pogotowie Ratunkowe',phone:'999',description:'NagÅ‚e przypadki medyczne'},
        {id:2,name:'Numer Alarmowy',phone:'112',description:'Wszystkie nagÅ‚e sytuacje'},
        {id:3,name:'Policja',phone:'997',description:'Pilne sprawy policyjne'},
        {id:4,name:'StraÅ¼ PoÅ¼arna',phone:'998',description:'PoÅ¼ary i zagroÅ¼enia'}
      ]);
      setDailyTips(["Pij co najmniej 1,5 litra wody dziennie","ZrÃ³b krÃ³tki spacer dla lepszego krÄ…Å¼enia","PamiÄ™taj o regularnych posiÅ‚kach","SprawdÅº czy masz wystarczajÄ…cÄ… iloÅ›Ä‡ lekÃ³w","ZadzwoÅ„ do bliskiej osoby"]);
      fetchWeather();
    },[]);

    useEffect(()=>{localStorage.setItem('medications',JSON.stringify(medications))},[medications]);
    useEffect(()=>{localStorage.setItem('familyContacts',JSON.stringify(familyContacts))},[familyContacts]);
    useEffect(()=>{localStorage.setItem('localServices',JSON.stringify(localServices))},[localServices]);
    useEffect(()=>{localStorage.setItem('reminders',JSON.stringify(reminders))},[reminders]);
    useEffect(()=>{localStorage.setItem('sosContacts',JSON.stringify(sosContacts))},[sosContacts]);
    useEffect(()=>{localStorage.setItem('healthData',JSON.stringify(healthData))},[healthData]);

    const addNotification=text=>{
      const newNotif={id:Date.now(),text,time:new Date().toLocaleTimeString('pl-PL',{hour:'2-digit',minute:'2-digit'}),read:false};
      setNotifications(prev=>[newNotif,...prev]);
    };

    const getMedicationStatus=medTime=>{
      const now=new Date();
      const[h,m]=medTime.split(':');
      const med=new Date(); med.setHours(parseInt(h),parseInt(m),0);
      const d=(now-med)/6e4;
      if(d<-30)return{status:'early',color:'yellow',icon:'â°',text:'Za wczeÅ›nie'};
      if(d>60)return{status:'late',color:'red',icon:'âš ï¸',text:'SpÃ³Åºniony'};
      return{status:'ontime',color:'green',icon:'âœ…',text:'Czas na lek'};
    };
    const isMedicationDay=medDays=>{
      const days=['Nd','Pn','Wt','Åšr','Cz','Pt','Sb'];
      const today=days[new Date().getDay()];
      return medDays.includes(today);
    };
    const markMedicationTaken=id=>{
      const med=medications.find(m=>m.id===id);
      if(!med)return;
      const entry={id:Date.now(),medId:id,medName:med.name,time:new Date().toLocaleTimeString('pl-PL',{hour:'2-digit',minute:'2-digit'}),date:new Date().toLocaleDateString('pl-PL'),status:getMedicationStatus(med.time).status};
      setMedicationHistory(prev=>[entry,...prev].slice(0,50));
      setMedications(prev=>prev.map(m=>m.id===id?{...m,taken:true}:m));
      if(careMode){setSelectedMedication(med);setShowNotifyDialog(true);}
      else addNotification(`Lek "${med.name}" zostaÅ‚ przyjÄ™ty`);
    };
    const deleteMedication=id=>setMedications(prev=>prev.filter(m=>m.id!==id));
    const addMedication=()=>{
      if(newMedName&&newMedTime){
        setMedications(prev=>[...prev,{id:Date.now(),name:newMedName,time:newMedTime,taken:false,days:newMedDays,note:newMedNote}]);
        setNewMedName('');setNewMedTime('');setNewMedDays(['Pn','Wt','Åšr','Cz','Pt','Sb','Nd']);setNewMedNote('');
      }
    };
    const toggleDay=day=>setNewMedDays(prev=>prev.includes(day)?prev.filter(d=>d!==day):[...prev,day]);

    // KONTAKTY
    const addContact=()=>{
      if(newContactName&&newContactPhone){
        setFamilyContacts(prev=>[...prev,{id:Date.now(),name:newContactName,phone:newContactPhone,avatar:'ğŸ‘¤',app:newContactApp,emergencyContact:true}]);
        setNewContactName('');setNewContactPhone('');setNewContactApp('');
      }
    };
    const deleteContact=id=>setFamilyContacts(prev=>prev.filter(c=>c.id!==id));
    const startEditContact=c=>{
      setEditingContact(c.id);
      setNewContactName(c.name);
      setNewContactPhone(c.phone);
      setNewContactApp(c.app);
    };
    const saveEditContact=id=>{
      setFamilyContacts(prev=>prev.map(c=>c.id===id?{...c,name:newContactName,phone:newContactPhone,app:newContactApp}:c));
      setEditingContact(null);setNewContactName('');setNewContactPhone('');setNewContactApp('');
    };
    const cancelEditContact=()=>{setEditingContact(null);setNewContactName('');setNewContactPhone('');setNewContactApp('');};

    // USÅUGI
    const addService=()=>{
      if(newServiceName&&newServicePhone){
        setLocalServices(prev=>[...prev,{id:Date.now(),name:newServiceName,phone:newServicePhone,icon:newServiceIcon||'ğŸ¢'}]);
        setNewServiceName('');setNewServicePhone('');setNewServiceIcon('');
      }
    };
    const deleteService=id=>setLocalServices(prev=>prev.filter(s=>s.id!==id));
    const startEditService=s=>{
      setEditingService(s.id);
      setNewServiceName(s.name);
      setNewServicePhone(s.phone);
      setNewServiceIcon(s.icon);
    };
    const saveEditService=id=>{
      setLocalServices(prev=>prev.map(s=>s.id===id?{...s,name:newServiceName,phone:newServicePhone,icon:newServiceIcon||'ğŸ¢'}:s));
      setEditingService(null);setNewServiceName('');setNewServicePhone('');setNewServiceIcon('');
    };
    const cancelEditService=()=>{setEditingService(null);setNewServiceName('');setNewServicePhone('');setNewServiceIcon('');};

    // ZDROWIE
    const updateHealthData=(field,value)=>{
      const updated={...healthData,[field]:value,lastUpdate:new Date().toLocaleDateString('pl-PL')};
      setHealthData(updated);
      addNotification(`Zaktualizowano dane: ${field}`);
    };

    // PRZYPOMNIENIA
    const addReminder=()=>{
      if(newReminderText&&newReminderTime){
        const r={id:Date.now(),text:newReminderText,time:newReminderTime,completed:false,date:new Date().toLocaleDateString('pl-PL')};
        setReminders(prev=>[...prev,r]);
        setNewReminderText('');setNewReminderTime('');
      }
    };
    const toggleReminder=id=>setReminders(prev=>prev.map(rr=>rr.id===id?{...rr,completed:!rr.completed}:rr));
    const deleteReminder=id=>setReminders(prev=>prev.filter(rr=>rr.id!==id));

    // LOGOWANIE / HASÅO
    const handleLogin=()=>{
      const savedP=localStorage.getItem('userPassword')||'senior123';
      if(username&&password===savedP){setIsLoggedIn(true);localStorage.setItem('isLoggedIn','true');localStorage.setItem('username',username);addNotification(`Witaj ${username}!`);}
      else alert('NieprawidÅ‚owa nazwa lub hasÅ‚o!');
    };
    const handleLogout=()=>{setIsLoggedIn(false);setUsername('');localStorage.removeItem('isLoggedIn');localStorage.removeItem('username');addNotification('Wylogowano');};
    const changePassword=()=>{
      const savedP=localStorage.getItem('userPassword')||'senior123';
      if(!currentPassword){alert('Podaj obecne hasÅ‚o');return;}
      if(currentPassword!==savedP){alert('Obecne hasÅ‚o jest nieprawidÅ‚owe');return;}
      if(newPassword.length<4){alert('Minimum 4 znaki');return;}
      if(newPassword!==confirmPassword){alert('HasÅ‚a siÄ™ rÃ³Å¼niÄ…');return;}
      localStorage.setItem('userPassword',newPassword);
      setPassword(newPassword);
      setCurrentPassword('');setNewPassword('');setConfirmPassword('');
      addNotification('HasÅ‚o zmienione');
    };

    // SOS
    const updateSosContact=(id,field,value)=>setSosContacts(prev=>prev.map(c=>c.id===id?{...c,[field]:value}:c));
    const saveSosContacts=()=>{localStorage.setItem('sosContacts',JSON.stringify(sosContacts));addNotification('Zapisano numery SOS');};
    const addSosContact=()=>setSosContacts(prev=>[...prev,{id:Date.now(),name:'Nowy numer',phone:'',description:'Opis'}]);
    const removeSosContact=id=>{if(sosContacts.length<=1){alert('Musi zostaÄ‡ przynajmniej jeden numer');return;}setSosContacts(prev=>prev.filter(c=>c.id!==id));};

    // POGODA
    const fetchWeather=async()=>{
      setWeatherLoading(true);
      await new Promise(r=>setTimeout(r,600));
      const conditions=[{c:'SÅ‚onecznie',i:'â˜€ï¸'},{c:'CzÄ™Å›ciowe zachmurzenie',i:'â›…'},{c:'Deszczowo',i:'ğŸŒ§ï¸'},{c:'Pochmurno',i:'â˜ï¸'}];
      const pick=conditions[Math.floor(Math.random()*conditions.length)];
      setWeatherData({temperature:Math.round(Math.random()*15+10),condition:pick.c,icon:pick.i,humidity:Math.round(Math.random()*50+40),wind:Math.round(Math.random()*20+5),city:'Warszawa'});
      setWeatherLoading(false);
      addNotification('Pobrano pogodÄ™');
    };

    // AWARYJNY
    const activateEmergencyMode=()=>{
      setEmergencyMode(true);setEmergencyCountdown(5);addNotification('ğŸš¨ Tryb awaryjny');
      const int=setInterval(()=>{
        setEmergencyCountdown(c=>{
          if(c<=1){clearInterval(int);sendEmergencyNotifications();return 0;}
          return c-1;
        });
      },1000);
    };
    const cancelEmergency=()=>{setEmergencyMode(false);setEmergencyCountdown(null);addNotification('Anulowano');};
    const sendEmergencyNotifications=()=>{
      const msg=`ğŸš¨ PILNA POMOC! UÅ¼ytkownik ${username||'Senior'} potrzebuje pomocy!`;
      familyContacts.filter(fc=>fc.emergencyContact).forEach(c=>{
        const phone=c.phone.replace(/[^\d+]/g,'');
        if(c.app==='whatsapp') window.open(`https://api.whatsapp.com/send?phone=${phone}&text=${encodeURIComponent(msg)}`,'_blank');
        else if(c.app==='viber') window.location.href=`viber://chat?number=${phone}`;
        else window.location.href=`sms:${phone}?body=${encodeURIComponent(msg)}`;
      });
      if(sosContacts.length) window.location.href=`tel:${sosContacts[0].phone}`;
      setEmergencyMode(false);
    };

    // EKRANY
    const DashboardScreen=()=>(
      <div className="space-y-4 md:space-y-6">
        <h2 className="text-3xl md:text-4xl font-bold text-center mb-6">Witaj, {username||'UÅ¼ytkowniku'}! ğŸ‘‹</h2>
        <div className="grid grid-cols-2 gap-3 md:gap-4">
          <button onClick={()=>setCurrentScreen('video')} className="bg-green-500 hover:bg-green-600 text-white p-6 rounded-2xl flex flex-col items-center space-y-2"><span className="text-4xl">ğŸ“¹</span><span className="text-xl font-bold">Rozmowa Wideo</span></button>
          <button onClick={()=>setCurrentScreen('medications')} className="bg-purple-500 hover:bg-purple-600 text-white p-6 rounded-2xl flex flex-col items-center space-y-2"><span className="text-4xl">ğŸ’Š</span><span className="text-xl font-bold">Leki</span></button>
          <button onClick={()=>setCurrentScreen('contacts')} className="bg-blue-500 hover:bg-blue-600 text-white p-6 rounded-2xl flex flex-col items-center space-y-2"><span className="text-4xl">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span><span className="text-xl font-bold">Rodzina</span></button>
          <button onClick={()=>setCurrentScreen('services')} className="bg-orange-500 hover:bg-orange-600 text-white p-6 rounded-2xl flex flex-col items-center space-y-2"><span className="text-4xl">ğŸ“</span><span className="text-xl font-bold">UsÅ‚ugi</span></button>
        </div>
        <div className="bg-white border-4 border-blue-300 p-4 rounded-3xl"><h3 className="text-xl font-bold mb-3 text-center">ğŸ“‹ Dzisiejsze zadania</h3><div className="space-y-2">{medications.filter(m=>isMedicationDay(m.days)&&!m.taken).slice(0,3).map(m=><div key={m.id} className="flex items-center justify-between p-2 bg-yellow-50 rounded-xl"><span className="font-bold">ğŸ’Š {m.name}</span><span className="text-sm">{m.time}</span></div>)}</div></div>
        <div className="bg-gradient-to-r from-green-400 to-blue-500 text-white p-4 rounded-3xl text-center"><h3 className="text-xl font-bold mb-2">ğŸ’¡ Porada dnia</h3><p className="text-lg">{dailyTips[currentTipIndex]}</p><button onClick={()=>setCurrentTipIndex((currentTipIndex+1)%dailyTips.length)} className="mt-2 bg-white text-blue-600 px-3 py-1 rounded-lg font-bold">NastÄ™pna</button></div>
        <div className="bg-white border-4 border-yellow-300 p-4 rounded-3xl text-center"><h3 className="text-xl font-bold mb-2">ğŸŒ¤ï¸ Pogoda</h3>{weatherLoading?<>Åadowanie...</>:weatherData?<>
          <div className="flex items-center justify-center space-x-4"><span className="text-4xl">{weatherData.icon}</span><div><div className="text-2xl font-bold">{weatherData.temperature}Â°C</div><div className="text-lg">{weatherData.condition}</div><div className="text-sm text-gray-600">{weatherData.city}</div></div></div>
          <div className="grid grid-cols-2 gap-2 text-sm mt-3"><div className="bg-blue-50 p-2 rounded-lg"><div>ğŸ’¨ Wiatr</div><div className="font-bold">{weatherData.wind} km/h</div></div><div className="bg-blue-50 p-2 rounded-lg"><div>ğŸ’§ WilgotnoÅ›Ä‡</div><div className="font-bold">{weatherData.humidity}%</div></div></div>
        </>:<>Brak danych</>}<button onClick={fetchWeather} disabled={weatherLoading} className={`mt-3 w-full py-2 rounded-lg font-bold ${weatherLoading?'bg-gray-400':'bg-yellow-500 hover:bg-yellow-600'} text-white`}>{weatherLoading?'Åadowanie...':'ğŸ”„ OdÅ›wieÅ¼'}</button></div>
      </div>
    );

    const MedicationsScreen=()=>(
      <div className="space-y-4 md:space-y-6">
        <h2 className="text-3xl md:text-4xl font-bold text-center mb-6">Przypomnienia o Lekach</h2>
        {medications.map(med=>{
          const medStatus=getMedicationStatus(med.time);
          const isToday=isMedicationDay(med.days);
          return(
            <div key={med.id} className={`bg-white border-4 p-4 md:p-6 rounded-3xl shadow-xl ${med.taken?'border-gray-300 opacity-60':medStatus.status==='ontime'?'border-green-500':'border-red-400'}`}>
              <div className="flex items-start justify-between mb-3"><div className="flex-1"><div className="text-2xl md:text-3xl font-bold">{med.name}</div><div className="text-xl md:text-2xl text-gray-600">â° Godzina: {med.time}</div>{med.note&&<div className="text-lg md:text-xl text-blue-600 mt-1 bg-blue-50 px-3 py-1 rounded-lg inline-block">ğŸ“ {med.note}</div>}</div>{!isToday&&<div className="bg-gray-100 px-3 py-2 rounded-xl text-sm md:text-base text-gray-600 font-bold ml-2">ğŸš« Nie dziÅ›</div>}</div>
              {isToday&&!med.taken&&<div className={`mb-3 p-3 rounded-xl text-center text-lg md:text-xl font-bold ${medStatus.status==='ontime'?'bg-green-100 text-green-700':'bg-red-100 text-red-700'}`}>{medStatus.icon} {medStatus.text}</div>}
              {med.taken&&<div className="mb-3 p-3 bg-gray-100 rounded-xl text-center text-lg md:text-xl font-bold text-gray-600">âœ… PrzyjÄ™ty dzisiaj</div>}
              <div className="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-3">
                {!med.taken&&isToday?<>
                  <button onClick={()=>markMedicationTaken(med.id)} disabled={medStatus.status==='early'} className={`flex-1 text-white p-3 md:p-4 rounded-2xl text-xl md:text-2xl font-bold ${medStatus.status==='early'?'bg-gray-400 cursor-not-allowed':'bg-green-500 hover:bg-green-600'}`}>âœ… PrzyjÄ™ty</button>
                  <button onClick={()=>{}} className="flex-1 bg-blue-500 hover:bg-blue-600 text-white p-3 md:p-4 rounded-2xl text-lg md:text-xl">â° OdÅ‚Ã³Å¼ 15 min</button>
                </>:<div className="flex-1 bg-gray-300 text-white p-3 md:p-4 rounded-2xl text-center text-xl md:text-2xl font-bold">âœ… Wykonano</div>}
                <button onClick={()=>deleteMedication(med.id)} className="bg-red-500 hover:bg-red-600 text-white p-3 md:p-4 rounded-2xl text-xl md:text-2xl">ğŸ—‘ï¸</button>
              </div>
            </div>
          );
        })}
        <div className="bg-blue-50 border-4 border-blue-300 p-4 md:p-6 rounded-3xl space-y-4">
          <h3 className="text-xl md:text-2xl font-bold text-center">â• Dodaj Nowy Lek</h3>
          <SmartInput type="text" placeholder="Nazwa leku" value={newMedName} onChange={setNewMedName}/>
          <SmartInput type="time" value={newMedTime} onChange={setNewMedTime}/>
          <SmartInput type="text" placeholder="Notatka (np. przed jedzeniem)" value={newMedNote} onChange={setNewMedNote}/>
          <div>
            <p className="text-lg md:text-xl font-bold mb-3 text-center">ğŸ“… Wybierz dni:</p>
            <div className="grid grid-cols-7 gap-2">
              {['Pn','Wt','Åšr','Cz','Pt','Sb','Nd'].map(day=>(
                <button key={day} onClick={()=>toggleDay(day)} className={`p-3 rounded-xl font-bold ${newMedDays.includes(day)?'bg-blue-500 text-white':'bg-gray-200 text-gray-500'}`}>{day}</button>
              ))}
            </div>
            <div className="mt-3 flex flex-wrap gap-2 justify-center">
              <button onClick={()=>setNewMedDays(['Pn','Wt','Åšr','Cz','Pt','Sb','Nd'])} className="px-4 py-2 bg-green-500 text-white rounded-xl font-bold">Codziennie</button>
              <button onClick={()=>setNewMedDays(['Pn','Wt','Åšr','Cz','Pt'])} className="px-4 py-2 bg-blue-500 text-white rounded-xl font-bold">Pn-Pt</button>
              <button onClick={()=>setNewMedDays([])} className="px-4 py-2 bg-red-500 text-white rounded-xl font-bold">WyczyÅ›Ä‡</button>
            </div>
          </div>
          <button onClick={addMedication} className="w-full bg-blue-500 hover:bg-blue-600 text-white text-xl md:text-2xl font-bold p-3 md:p-4 rounded-2xl">â• Dodaj Lek</button>
        </div>
      </div>
    );

    const ContactsScreen=()=>(
      <div className="space-y-4 md:space-y-6">
        <h2 className="text-3xl md:text-4xl font-bold text-center mb-6">Kontakty Rodzinne</h2>
        {familyContacts.map(c=>(
          <div key={c.id} className="bg-white border-4 border-blue-500 p-4 md:p-6 rounded-3xl shadow-xl mb-4">
            {editingContact===c.id?(
              <div className="space-y-4">
                <SmartInput type="text" placeholder="ImiÄ™ i nazwisko" value={newContactName} onChange={setNewContactName}/>
                <SmartInput type="tel" placeholder="Numer telefonu z +48" value={newContactPhone} onChange={setNewContactPhone}/>
                <select value={newContactApp} onChange={e=>setNewContactApp(e.target.value)} className="improved-input"><option value="">Brak aplikacji</option><option value="whatsapp">WhatsApp</option><option value="viber">Viber</option></select>
                <div className="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3">
                  <button onClick={()=>saveEditContact(c.id)} className="flex-1 bg-green-500 hover:bg-green-600 text-white p-3 md:p-4 rounded-2xl text-lg">ğŸ’¾ Zapisz</button>
                  <button onClick={cancelEditContact} className="flex-1 bg-gray-500 hover:bg-gray-600 text-white p-3 md:p-4 rounded-2xl text-lg">âŒ Anuluj</button>
                </div>
              </div>
            ):(
              <>
                <div className="flex items-center space-x-4 md:space-x-6 mb-4"><span className="text-5xl md:text-6xl">{c.avatar}</span><div className="flex-1"><div className="text-2xl md:text-3xl font-bold">{c.name}</div><div className="text-lg md:text-xl text-gray-500">{c.phone}</div><div className="text-base md:text-lg text-gray-400">{c.app?`(${c.app})`:''}</div></div></div>
                <div className="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3">
                  <button onClick={()=>window.location.href=`tel:${c.phone}`} className="flex-1 bg-green-500 hover:bg-green-600 text-white p-3 md:p-4 rounded-2xl text-lg">ğŸ“ ZadzwoÅ„</button>
                  <button onClick={()=>{window.location.href=`https://api.whatsapp.com/send?phone=${c.phone.replace(/[^\d+]/g,'')}&text=${encodeURIComponent('ğŸ“¹')}`}} className="flex-1 bg-blue-500 hover:bg-blue-600 text-white p-3 md:p-4 rounded-2xl text-lg">ğŸ¥ Wideo</button>
                </div>
                <div className="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3 mt-3">
                  <button onClick={()=>startEditContact(c)} className="flex-1 bg-yellow-500 hover:bg-yellow-600 text-white p-3 md:p-4 rounded-2xl text-lg">âœï¸ Edytuj</button>
                  <button onClick={()=>deleteContact(c.id)} className="flex-1 bg-red-500 hover:bg-red-600 text-white p-3 md:p-4 rounded-2xl text-lg">ğŸ—‘ï¸ UsuÅ„</button>
                </div>
              </>
            )}
          </div>
        ))}
        <div className="bg-blue-50 border-4 border-blue-300 p-4 md:p-6 rounded-3xl space-y-4">
          <h3 className="text-xl md:text-2xl font-bold text-center">Dodaj Kontakt</h3>
          <SmartInput type="text" placeholder="ImiÄ™ i nazwisko" value={newContactName} onChange={setNewContactName}/>
          <SmartInput type="tel" placeholder="Numer telefonu z +48" value={newContactPhone} onChange={setNewContactPhone}/>
          <select value={newContactApp} onChange={e=>setNewContactApp(e.target.value)} className="improved-input"><option value="">Brak aplikacji</option><option value="whatsapp">WhatsApp</option><option value="viber">Viber</option></select>
          <button onClick={addContact} className="w-full bg-blue-500 hover:bg-blue-600 text-white text-xl md:text-2xl font-bold p-3 md:p-4 rounded-2xl">â• Dodaj Kontakt</button>
        </div>
      </div>
    );

    const ServicesScreen=()=>(
      <div className="space-y-4 md:space-y-6">
        <h2 className="text-3xl md:text-4xl font-bold text-center mb-6">Lokalne UsÅ‚ugi</h2>
        {localServices.map(s=>(
          <div key={s.id} className="bg-white border-4 border-orange-500 p-4 md:p-6 rounded-3xl shadow-xl mb-4">
            {editingService===s.id?(
              <div className="space-y-4">
                <SmartInput type="text" placeholder="Nazwa" value={newServiceName} onChange={setNewServiceName}/>
                <SmartInput type="tel" placeholder="Telefon" value={newServicePhone} onChange={setNewServicePhone}/>
                <SmartInput type="text" placeholder="Emoji/Ikona" value={newServiceIcon} onChange={setNewServiceIcon}/>
                <div className="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3">
                  <button onClick={()=>saveEditService(s.id)} className="flex-1 bg-green-500 hover:bg-green-600 text-white p-3 md:p-4 rounded-2xl text-lg">ğŸ’¾ Zapisz</button>
                  <button onClick={cancelEditService} className="flex-1 bg-gray-500 hover:bg-gray-600 text-white p-3 md:p-4 rounded-2xl text-lg">âŒ Anuluj</button>
                </div>
              </div>
            ):(
              <>
                <div className="flex items-center space-x-4 md:space-x-6 mb-4"><span className="text-5xl md:text-6xl">{s.icon}</span><div className="flex-1"><div className="text-2xl md:text-3xl font-bold">{s.name}</div><div className="text-lg md:text-xl text-gray-500">{s.phone}</div></div></div>
                <div className="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3">
                  <button onClick={()=>window.location.href=`tel:${s.phone}`} className="flex-1 bg-green-500 hover:bg-green-600 text-white p-3 md:p-4 rounded-2xl text-lg">ğŸ“ ZadzwoÅ„</button>
                </div>
                <div className="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3 mt-3">
                  <button onClick={()=>startEditService(s)} className="flex-1 bg-yellow-500 hover:bg-yellow-600 text-white p-3 md:p-4 rounded-2xl text-lg">âœï¸ Edytuj</button>
                  <button onClick={()=>deleteService(s.id)} className="flex-1 bg-red-500 hover:bg-red-600 text-white p-3 md:p-4 rounded-2xl text-lg">ğŸ—‘ï¸ UsuÅ„</button>
                </div>
              </>
            )}
          </div>
        ))}
        <div className="bg-orange-50 border-4 border-orange-300 p-4 md:p-6 rounded-3xl space-y-4">
          <h3 className="text-xl md:text-2xl font-bold text-center">Dodaj UsÅ‚ugÄ™</h3>
          <SmartInput type="text" placeholder="Nazwa" value={newServiceName} onChange={setNewServiceName}/>
          <SmartInput type="tel" placeholder="Telefon" value={newServicePhone} onChange={setNewServicePhone}/>
          <SmartInput type="text" placeholder="Emoji/Ikona" value={newServiceIcon} onChange={setNewServiceIcon}/>
          <button onClick={addService} className="w-full bg-orange-500 hover:bg-orange-600 text-white text-xl md:text-2xl font-bold p-3 md:p-4 rounded-2xl">â• Dodaj UsÅ‚ugÄ™</button>
        </div>
      </div>
    );

    const HealthScreen=()=>(
      <div className="space-y-4 md:space-y-6">
        <h2 className="text-3xl md:text-4xl font-bold text-center mb-6">â¤ï¸ Moje Zdrowie</h2>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div className="bg-white border-4 border-red-300 p-4 rounded-3xl"><h3 className="text-xl font-bold mb-3 text-center">ğŸ©¸ CiÅ›nienie krwi</h3><SmartInput type="text" placeholder="np. 120/80" value={healthData.bloodPressure} onChange={v=>updateHealthData('bloodPressure',v)}/></div>
          <div className="bg-white border-4 border-green-300 p-4 rounded-3xl"><h3 className="text-xl font-bold mb-3 text-center">ğŸ’“ TÄ™tno</h3><SmartInput type="text" placeholder="np. 72" value={healthData.heartRate} onChange={v=>updateHealthData('heartRate',v)}/></div>
          <div className="bg-white border-4 border-blue-300 p-4 rounded-3xl"><h3 className="text-xl font-bold mb-3 text-center">ğŸ©¸ Cukier</h3><SmartInput type="text" placeholder="np. 95" value={healthData.bloodSugar} onChange={v=>updateHealthData('bloodSugar',v)}/></div>
          <div className="bg-white border-4 border-purple-300 p-4 rounded-3xl"><h3 className="text-xl font-bold mb-3 text-center">âš–ï¸ Waga</h3><SmartInput type="text" placeholder="np. 70 kg" value={healthData.weight} onChange={v=>updateHealthData('weight',v)}/></div>
        </div>
      </div>
    );

    const RemindersScreen=()=>(
      <div className="space-y-4 md:space-y-6">
        <h2 className="text-3xl md:text-4xl font-bold text-center mb-6">ğŸ“ Moje Przypomnienia</h2>
        {reminders.map(r=>(
          <div key={r.id} className={`bg-white border-4 p-4 rounded-3xl ${r.completed?'border-gray-300 opacity-60':'border-blue-500'}`}>
            <div className="flex items-center justify-between"><div className="flex-1"><div className={`text-xl font-bold ${r.completed?'line-through text-gray-500':''}`}>{r.text}</div><div className="text-gray-600">â° {r.time} | ğŸ“… {r.date}</div></div>
              <div className="flex space-x-2"><button onClick={()=>toggleReminder(r.id)} className={`p-2 rounded-xl ${r.completed?'bg-yellow-500 hover:bg-yellow-600':'bg-green-500 hover:bg-green-600'} text-white`}>{r.completed?'â†¶':'âœ“'}</button><button onClick={()=>deleteReminder(r.id)} className="bg-red-500 hover:bg-red-600 text-white p-2 rounded-xl">ğŸ—‘ï¸</button></div>
            </div>
          </div>
        ))}
        <div className="bg-blue-50 border-4 border-blue-300 p-4 md:p-6 rounded-3xl space-y-4">
          <h3 className="text-xl md:text-2xl font-bold text-center">â• Dodaj Nowe Przypomnienie</h3>
          <SmartInput type="text" placeholder="TreÅ›Ä‡ przypomnienia" value={newReminderText} onChange={setNewReminderText}/>
          <SmartInput type="time" value={newReminderTime} onChange={setNewReminderTime}/>
          <button onClick={addReminder} className="w-full bg-blue-500 hover:bg-blue-600 text-white text-xl font-bold p-3 md:p-4 rounded-2xl">â• Dodaj</button>
        </div>
      </div>
    );

    const SosContactsScreen=()=>(
      <div className="space-y-4 md:space-y-6">
        <h2 className="text-3xl md:text-4xl font-bold text-center mb-6">ğŸš¨ Numery Alarmowe SOS</h2>
        <div className="bg-red-50 border-4 border-red-300 p-4 rounded-3xl"><h3 className="text-xl font-bold text-center mb-4">âš ï¸ WaÅ¼ne informacje</h3><p className="text-center text-lg">Te numery zostanÄ… automatycznie wybrane w trybie awaryjnym. Pierwszy numer na liÅ›cie bÄ™dzie uÅ¼ywany do natychmiastowego poÅ‚Ä…czenia.</p></div>
        {sosContacts.map((contact,i)=>(
          <div key={contact.id} className="bg-white border-4 border-red-500 p-4 rounded-3xl">
            <div className="flex items-center justify-between mb-3"><div className="text-lg font-bold text-red-600">#{i+1} {i===0&&'ğŸƒâ€â™‚ï¸ (GÅ‚Ã³wny)'}</div>{sosContacts.length>1&&<button onClick={()=>removeSosContact(contact.id)} className="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg text-sm">ğŸ—‘ï¸ UsuÅ„</button>}</div>
            <div className="space-y-3">
              <div><label className="block text-sm font-bold mb-1">Nazwa sÅ‚uÅ¼by:</label><SmartInput type="text" value={contact.name} onChange={v=>updateSosContact(contact.id,'name',v)}/></div>
              <div><label className="block text-sm font-bold mb-1">Numer telefonu:</label><SmartInput type="tel" value={contact.phone} onChange={v=>updateSosContact(contact.id,'phone',v)} placeholder="np. 999, 112, 997"/></div>
              <div><label className="block text-sm font-bold mb-1">Opis:</label><SmartInput type="text" value={contact.description} onChange={v=>updateSosContact(contact.id,'description',v)} placeholder="KrÃ³tki opis kiedy dzwoniÄ‡"/></div>
              <button onClick={()=>window.location.href=`tel:${contact.phone}`} className="w-full bg-green-500 hover:bg-green-600 text-white p-3 rounded-xl font-bold">ğŸ“ ZadzwoÅ„ teraz</button>
            </div>
          </div>
        ))}
        <div className="flex space-x-3"><button onClick={addSosContact} className="flex-1 bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-2xl text-lg font-bold">â• Dodaj Numer</button><button onClick={saveSosContacts} className="flex-1 bg-green-500 hover:bg-green-600 text-white p-4 rounded-2xl text-lg font-bold">ğŸ’¾ Zapisz Zmiany</button></div>
      </div>
    );

    const ChangePasswordScreen=()=>(
      <div className="space-y-4 md:space-y-6">
        <h2 className="text-3xl md:text-4xl font-bold text-center mb-6">ğŸ” Zmiana HasÅ‚a</h2>
        <div className="bg-white border-4 border-blue-500 p-6 rounded-3xl space-y-4">
          <div><label className="block text-lg font-bold mb-2">Obecne hasÅ‚o:</label><SmartInput type="password" value={currentPassword} onChange={setCurrentPassword} placeholder="WprowadÅº obecne hasÅ‚o"/></div>
          <div><label className="block text-lg font-bold mb-2">Nowe hasÅ‚o:</label><SmartInput type="password" value={newPassword} onChange={setNewPassword} placeholder="Minimum 4 znaki"/></div>
          <div><label className="block text-lg font-bold mb-2">PowtÃ³rz nowe hasÅ‚o:</label><SmartInput type="password" value={confirmPassword} onChange={setConfirmPassword} placeholder="PowtÃ³rz"/></div>
          <button onClick={changePassword} className="w-full bg-green-500 hover:bg-green-600 text-white text-xl font-bold p-4 rounded-2xl">ğŸ’¾ ZmieÅ„ HasÅ‚o</button>
        </div>
      </div>
    );

    const SettingsScreen=()=>(
      <div className="space-y-6">
        <h2 className="text-3xl md:text-4xl font-bold text-center mb-8">Ustawienia</h2>
        <div className="bg-white border-4 border-blue-500 p-6 rounded-3xl shadow-xl"><div className="flex items-center justify-between mb-6"><div className="flex-1 pr-4"><div className="text-2xl md:text-3xl font-bold">UÅ¼ytkownik: {username}</div><div className="text-lg md:text-xl text-gray-600 mt-2">Zalogowany</div></div><button onClick={handleLogout} className="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-xl font-bold">Wyloguj</button></div></div>
        <div className="bg-white border-4 border-green-500 p-6 rounded-3xl shadow-xl"><h3 className="text-2xl md:text-3xl font-bold text-center mb-4">ğŸ” BezpieczeÅ„stwo</h3><div className="space-y-4"><button onClick={()=>setCurrentScreen('password')} className="w-full bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-2xl text-xl font-bold">ğŸ”‘ ZmieÅ„ HasÅ‚o</button><button onClick={()=>setCurrentScreen('sos')} className="w-full bg-red-500 hover:bg-red-600 text-white p-4 rounded-2xl text-xl font-bold">ğŸš¨ ZarzÄ…dzaj Numerami SOS</button></div></div>
        <div className="bg-white border-4 border-blue-500 p-6 rounded-3xl shadow-xl"><div className="flex items-center justify-between mb-6"><div className="flex-1 pr-4"><div className="text-2xl md:text-3xl font-bold">Tryb Opieki Rodzinnej</div><div className="text-lg md:text-xl text-gray-600 mt-2">Rodzina otrzymuje powiadomienia</div></div><button onClick={()=>setCareMode(!careMode)} className={`w-24 md:w-32 h-12 md:h-16 rounded-full transition-all ${careMode?'bg-green-500':'bg-gray-300'} relative flex-shrink-0`}><div className={`w-8 md:w-12 h-8 md:h-12 bg-white rounded-full absolute top-2 transition-all ${careMode?'left-12 md:left-16':'left-2'}`}></div></button></div><div className="text-lg md:text-xl text-gray-600 bg-blue-50 p-4 rounded-2xl">{careMode?'âœ“ Tryb aktywny':'âœ— Tryb wyÅ‚Ä…czony'}</div></div>
        <div className="bg-white border-4 border-green-500 p-6 rounded-3xl shadow-xl"><h3 className="text-2xl md:text-3xl font-bold text-center mb-4">ğŸŒ¤ï¸ Pogoda</h3><button onClick={fetchWeather} className="w-full bg-green-500 hover:bg-green-600 text-white p-4 rounded-2xl text-xl font-bold">Pobierz aktualnÄ… pogodÄ™</button></div>
        <div className="bg-purple-50 border-4 border-purple-300 p-6 rounded-3xl"><h3 className="text-2xl md:text-3xl font-bold text-center mb-4">Informacje o Aplikacji</h3><div className="space-y-3 text-lg md:text-xl text-gray-700"><p><strong>Wersja:</strong> 4.0 PWA</p><p><strong>Typ:</strong> Progressive Web App</p><p><strong>Wsparcie:</strong> +480 800 800</p></div></div>
        <div className="bg-red-50 border-4 border-red-300 p-6 rounded-3xl text-center"><h3 className="text-2xl md:text-3xl font-bold text-red-600 mb-4">âš ï¸ Niebezpieczna strefa</h3><button onClick={()=>{if(confirm('Na pewno?')){localStorage.clear();location.reload();}}} className="w-full bg-red-500 hover:bg-red-600 text-white p-4 rounded-2xl text-xl font-bold">ğŸ—‘ï¸ WyczyÅ›Ä‡ wszystkie dane</button></div>
      </div>
    );

    // GÅÃ“WNY RENDER
    return (
      <>
        {emergencyMode&&(
          <div className="fixed inset-0 bg-red-600 flex items-center justify-center z-50 p-4">
            <div className="bg-white rounded-3xl p-8 text-center max-w-md w-full">
              <div className="text-6xl mb-4">ğŸš¨</div><h3 className="text-3xl font-bold text-red-600 mb-4">TRYB AWARYJNY</h3>
              <p className="text-xl mb-4">Powiadomienia zostanÄ… wysÅ‚ane za:</p><div className="text-5xl font-bold text-red-600 mb-6">{emergencyCountdown}</div>
              <div className="space-y-3">
                <button onClick={cancelEmergency} className="w-full bg-green-500 hover:bg-green-600 text-white p-4 rounded-2xl text-xl font-bold">âœ… ANULUJ â€“ WSZYSTKO W PORZÄ„DKU</button>
                <button onClick={sendEmergencyNotifications} className="w-full bg-red-500 hover:bg-red-600 text-white p-4 rounded-2xl text-xl font-bold">ğŸš¨ WYÅšLIJ NATYCHMIAST</button>
              </div>
            </div>
          </div>
        )}

        {!isLoggedIn?(
          <div className="bg-white rounded-3xl shadow-2xl p-8 text-center max-w-md mx-auto mt-8">
            <h1 className="text-4xl font-bold text-blue-600 mb-2">Senior-Easy</h1>
            <p className="text-xl text-gray-600 mb-6">Zaloguj siÄ™ do aplikacji</p>
            <div className="space-y-4">
              <SmartInput type="text" placeholder="Nazwa uÅ¼ytkownika" value={username} onChange={setUsername}/>
              <SmartInput type="password" placeholder="HasÅ‚o (domyÅ›lnie: senior123)" value={password} onChange={setPassword}/>
              <button onClick={handleLogin} className="w-full bg-blue-500 hover:bg-blue-600 text-white text-xl font-bold p-4 rounded-2xl">ğŸ” Zaloguj siÄ™</button>
            </div>
            <p className="text-gray-500 mt-4 text-sm">DomyÅ›lne hasÅ‚o: senior123</p>
          </div>
        ):(
          <>
            <div className="bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-3 sm:p-4 mb-4 sm:mb-6 flex justify-between items-center">
              <button onClick={()=>setCurrentScreen('dashboard')} className="bg-blue-500 hover:bg-blue-600 text-white p-2 sm:p-4 rounded-xl sm:rounded-2xl"><span className="text-3xl sm:text-5xl">ğŸ </span></button>
              <div className="text-lg sm:text-2xl md:text-3xl font-bold text-gray-800 px-2 text-center">
                {currentScreen==='dashboard'?'Pulpit':currentScreen==='video'?'Rozmowa Wideo':currentScreen==='medications'?'Leki':currentScreen==='contacts'?'Rodzina':currentScreen==='services'?'UsÅ‚ugi':currentScreen==='health'?'Zdrowie':currentScreen==='reminders'?'Przypomnienia':currentScreen==='password'?'Zmiana HasÅ‚a':currentScreen==='sos'?'Numery SOS':currentScreen==='settings'?'Ustawienia':'Strona GÅ‚Ã³wna'}
              </div>
              <button onClick={()=>setCurrentScreen('settings')} className="bg-gray-500 hover:bg-gray-600 text-white p-2 sm:p-4 rounded-xl sm:rounded-2xl"><span className="text-3xl sm:text-5xl">âš™ï¸</span></button>
            </div>

            <div className="fixed bottom-20 right-4 z-40">
              <button onClick={activateEmergencyMode} className="emergency-pulse bg-red-500 hover:bg-red-600 text-white p-6 rounded-full shadow-2xl text-3xl">ğŸ†˜</button>
            </div>

            <div className="bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-6 md:p-8">
              {currentScreen==='dashboard'&&<DashboardScreen/>}
              {currentScreen==='health'&&<HealthScreen/>}
              {currentScreen==='reminders'&&<RemindersScreen/>}
              {currentScreen==='password'&&<ChangePasswordScreen/>}
              {currentScreen==='sos'&&<SosContactsScreen/>}
              {currentScreen==='video'&&<ServicesScreen/>} {/* uproszczone â€“ tylko kontakty */}
              {currentScreen==='services'&&<ServicesScreen/>}
              {currentScreen==='contacts'&&<ContactsScreen/>}
              {currentScreen==='medications'&&<MedicationsScreen/>}
              {currentScreen==='settings'&&<SettingsScreen/>}
              {currentScreen==='home'&&(
                <div className="space-y-4 sm:space-y-6 text-center">
                  <h1 className="text-3xl sm:text-4xl md:text-5xl font-bold text-blue-600 mb-2">Senior-Easy</h1>
                  <p className="text-lg sm:text-xl md:text-2xl text-gray-600 mb-4">Witaj! Co chcesz zrobiÄ‡?</p>
                  <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 md:gap-6">
                    <button onClick={()=>setCurrentScreen('video')} className="bg-green-500 hover:bg-green-600 text-white p-6 rounded-2xl flex flex-col items-center space-y-2"><span className="text-4xl">ğŸ“¹</span><span className="text-xl font-bold">Rozmowa Wideo</span></button>
                    <button onClick={()=>setCurrentScreen('medications')} className="bg-purple-500 hover:bg-purple-600 text-white p-6 rounded-2xl flex flex-col items-center space-y-2"><span className="text-4xl">ğŸ’Š</span><span className="text-xl font-bold">Leki</span></button>
                    <button onClick={()=>setCurrentScreen('contacts')} className="bg-blue-500 hover:bg-blue-600 text-white p-6 rounded-2xl flex flex-col items-center space-y-2"><span className="text-4xl">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span><span className="text-xl font-bold">Rodzina</span></button>
                    <button onClick={()=>setCurrentScreen('services')} className="bg-orange-500 hover:bg-orange-600 text-white p-6 rounded-2xl flex flex-col items-center space-y-2"><span className="text-4xl">ğŸ“</span><span className="text-xl font-bold">UsÅ‚ugi</span></button>
                  </div>
                </div>
              )}
            </div>
            <div className="text-center mt-6 text-gray-600 text-lg md:text-xl"><p>Senior-Easy Â© 2025 | Pomoc: +480 800 800</p></div>
          </>
        )}
      </>
    );
  }

  if('serviceWorker' in navigator){
    window.addEventListener('load',()=>{
      navigator.serviceWorker.register('service-worker.js').then(r=>console.log('SW ok',r)).catch(err=>console.log('SW fail',err));
    });
  }

  ReactDOM.createRoot(document.getElementById('root')).render(<SeniorEasyApp/>);
</script>
</body>
</html>
